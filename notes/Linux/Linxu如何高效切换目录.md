# Linxu如何高效切换目录

-------------------

## 前言

Linux下对于目录的切换，大家肯定会想到一个命令：**cd命令**

cd命令确实方便，但是当需要频繁的切换目录的时候，cd命令可能比较麻烦了。

比如：

``` c++
/home/yk/Practice/DayTopic/5.WarCode
/home/yk/LinuxDir/LinuxCode/IO/epoll/new
```

当需要一直在这两个目录下进行切换的时候，每次就非常的麻烦了。

如果只会cd命令的话，那么就需要不停的cd，直到你发疯。

那么在这种情况下，我们如何高效的进行目录切换呢？接下来给大家介绍三个命令：**`pushd`**、**`popd`**、**`dirs`**。

这三个命令其实都是对**目录栈**进行操作，而**目录栈**就是一个保存目录的栈结构，该**栈结构的顶端永远都存放这当前目录**（敲黑板了，重点）。

对于**栈**都是遵循着**先进后出**的原则。也就是说，在栈结构里，后面进栈的元素，将会先出栈。

下来我们详细介绍这个三个命令：

## 显示目录栈内容：dirs

首先是**`dirs`**。显示目录栈的内容，它有以下三个常用选项：

| 选项 |                     含义                      |
| :--: | :-------------------------------------------: |
|  -p  |               每行显示一条记录                |
|  -v  | 每行显示一条记录，同时显示该记录在栈中的index |
|  -c  |                  清空目录栈                   |

其中，**`-p`**和**`-v`**的区别就是，**`-v`**选项将显示每条记录在目录栈中的索引，除此之外完全一样。

假如现在存在一个目录栈，我们来看看其中的内容：

![](https://ykitty.oss-cn-beijing.aliyuncs.com/photo/Linux/dirs%E5%91%BD%E4%BB%A4.png)

请注意，**最顶部的元素永远跟当前目录一致**，如果你在其他目录下查看目录栈，第一个元素将对应发生改变。同理，如果你用后文的**`pushd`**和**`popd`**来操作目录栈的话，当前目录将切换到目录栈的第一个元素对应地址。

直接使用**`dirs`**默认是直接显示栈中左右内容，放在一行输出，并且没有index（索引）

如果清空目录栈，直接使用**`-c`**选项即可。

![](https://ykitty.oss-cn-beijing.aliyuncs.com/photo/Linux/dirs%20-c%E6%B8%85%E7%A9%BA%E7%9B%AE%E5%BD%95%E6%A0%88.png)

可以看到使用**`dirs -c`**之后，目录栈的内容将被清空，但是会保留下当前目录，也就是目录栈最顶端的目录。

## 压入目录栈：pushd

每次pushd命令执行完成之后，默认会执行一个**`dirs`**命令来显示目录栈的内容。**`pushd`**的用法主要有以下几种：

### 1. pushd + 目录

**`pushd`**后面如果是直接跟目录使用，会切换到该目录并且将该目录置于目录栈的栈顶。

举例：

![pushd+目录](https://ykitty.oss-cn-beijing.aliyuncs.com/photo/Linux/pushd%2B%E7%9B%AE%E5%BD%95.png)

### 2. pushd（不带任何参数）

pushd不带任何参数执行的效果就是，**将目录栈最顶层的两个目录进行交换**。前面我们已经强调过，目录栈的第一个元素与当前目录是相关的，所以第一个元素发生改变时，当前目录将对应切换，反之亦然。

![pushd不带参数](https://ykitty.oss-cn-beijing.aliyuncs.com/photo/Linux/pushd.png)

### 3. pushd +/-n

**`pushd +/-n`**就是直接**切换到对应索引值的目录**。注意，这里既可以是加号也可以是减号。如果是**加号**的话，将**从目录栈由上往下数**，而用**减号**的话，将**从目录栈由下往上数**。

接下里就回到我们本文开头的问题，如果我们要在两个或者多个路径很长的目录之间频繁切换，该如何操作呢？

首先，我们使用**`push + 目录`**的方式将这个几个路径添加到目录栈中；

然后，再用**push +/-n`**在不用的目录间快速切换。

具体演示如下：

![](https://ykitty.oss-cn-beijing.aliyuncs.com/photo/Linux/pushd%20%2Bor-n.png)

## 弹出目录栈：popd

每次**`popd`**命令执行完成之后，默认都会执行一个**`dirs`**命令来显示目录栈的内容。**`popd`**的用法主要如下几种：

### 1. popd（不带参数）

**`popd`**不带任何参数执行的效果，就是**将目录栈中的栈顶元素出栈**。这是栈顶元素发生变化，自然当前目录也会发生相应的切换。

![](https://ykitty.oss-cn-beijing.aliyuncs.com/photo/Linux/pushd.png)

### 2. popd +/-n

将目录栈中的第n个元素删除，同样的，加减号表示从上往下数，还是从下往上数。

![](https://ykitty.oss-cn-beijing.aliyuncs.com/photo/Linux/popd%20%2Bor-n.png)



## 总结：

三个命令：**`dirs`**、**`pushd`**、**`popd`**

dirs有着三个参数：

- **-c	清除所有目录**
- **-p    显示目录栈不带index**
- **-v     显示目录栈带index**

pushd有着三个用法：

- 直接使用**不带参数**，进行**栈顶元素和次栈顶元素进行交换**
- 后面跟**目录**，表示将**该目录进行压栈，并且默认压栈结束使用一次dirs命令**
- **+/-n**，+号表示从上往下数，-号表示从下往上数，进行**切换栈顶元素**。**默认从0开始数**

popd有着两种用法：

- **不带参数**，将**栈顶元素出栈**，由于**栈顶元素和目录相关联，切换目录**
- **+/-n**，+-号表示从上往下数，还是从下往上数，进行对于**目录出栈处理。默认从0开始数**





